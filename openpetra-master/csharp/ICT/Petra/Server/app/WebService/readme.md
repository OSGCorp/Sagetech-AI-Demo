## C# Petra Web Service Subproject Of OpenPetra

The OpenPetra is a C# application that provides administrative management tools for non-profit organizations. The program handles financial transactions and contact management while reducing operational overhead. This sub-project implements the web service interface layer along with session management capabilities. This provides these capabilities to the OpenPetra program:

- RESTful API endpoints for client-server communication
- User authentication and session management
- Self-service account functionality
- Server environment initialization for web requests
- Navigation menu retrieval for UI construction

## Identified Design Elements

1. Session Management Architecture: Implements comprehensive user authentication with login/logout functionality, password management, and persistent session tracking
2. Self-Service Capabilities: Provides account creation, confirmation workflows, and password reset functionality without administrator intervention
3. Server Environment Initialization: Automatically prepares the server context for each incoming web request
4. Client Connection Management: Maintains active client connections and provides polling mechanisms for asynchronous task monitoring

## Overview
The architecture emphasizes security through robust authentication mechanisms, provides self-service capabilities to reduce administrative overhead, and maintains clean separation between client and server concerns. The session management system serves as a critical integration point between the client interface and the core business logic of OpenPetra. The web service layer is designed for reliability and scalability, with comprehensive error handling and efficient resource management to support non-profit organizations' administrative needs.

## Business Functions

### Session Management
- `SessionManager.cs` : Session management web service for OpenPetra that handles user authentication and client-server communication.

## Files
### SessionManager.cs

TOpenPetraOrgSessionManager implements a web service class that manages user sessions for the OpenPetra application. It handles user authentication through login/logout functionality, password management, and session tracking. Key features include user login validation, self-service account creation and confirmation, password reset capabilities, and navigation menu retrieval. The class initializes the server environment for each web request, maintains client connections, and provides methods for polling client tasks. Important methods include Login(), Logout(), SetNewPassword(), SignUpSelfService(), and GetNavigationMenu().

 **Code Landmarks**
- `Line 94`: Handles multi-tenant configuration by dynamically determining the correct config file path based on the request URL
- `Line 156`: Resets static variables across multiple system components to ensure clean state for each web request
- `Line 328`: Implements a self-service user signup flow with email verification
- `Line 371`: Password reset functionality with secure token verification
- `Line 426`: Implements a contextual assistant system that prioritizes different setup needs

[Generated by the Sage AI expert workbench: 2025-03-30 02:22:57  https://sage-tech.ai/workbench]: #