# C# Sponsorship Module Of Petra

The Petra application is a C# program that helps non-profit organizations manage their administrative operations. The program handles contact management, accounting, and data export capabilities. This sub-project implements the sponsorship management functionality, providing a bridge between donors and recipients within the OpenPetra ecosystem. This module provides these capabilities to the Petra program:

- Child record management (creation, editing, deletion)
- Sponsorship relationship tracking
- Photo and documentation management for sponsored children
- Recurring gift arrangement processing
- Donation validation against sponsorship records

## Identified Design Elements

1. **Cross-Module Integration**: Interfaces with partner, finance, and gift modules to create a cohesive sponsorship management system
2. **Comprehensive Search Functionality**: Implements filtering mechanisms to locate children based on various attributes
3. **Media Management**: Handles upload and association of photos with sponsored children records
4. **Financial Processing**: Validates incoming donations against sponsorship records and manages recurring gift arrangements
5. **Data Validation**: Ensures integrity of sponsorship relationships and financial transactions

## Overview
The architecture follows a server-side implementation pattern through the TSponsorshipWebConnector class, which exposes methods for all sponsorship-related operations. The module is designed with clear separation between record management, financial processing, and media handling components. It serves as a critical link between the donor management aspects of OpenPetra and the financial tracking systems, enabling non-profits to efficiently administer child sponsorship programs while maintaining proper financial records and communication channels.

## Business Functions

### Sponsorship Management
- `web/webconnector.cs` : Webconnector for the sponsorship module enabling child sponsorship management in OpenPetra.

## Files
### web/webconnector.cs

TSponsorshipWebConnector implements server-side functionality for managing child sponsorships in OpenPetra. It provides methods for finding, creating, editing, and deleting sponsored children records, along with managing their photos, comments, reminders, and recurring gift arrangements. Key features include searching for children with various filters, maintaining sponsorship details, handling recurring gifts between donors and recipients, and validating incoming donations against sponsorship records. The class integrates with OpenPetra's partner, finance, and gift modules to provide a complete sponsorship management system. Important methods include FindChildren, GetChildDetails, MaintainChild, UploadPhoto, MaintainSponsorshipRecurringGifts, and CheckIncomingDonationsForSponsorship.

 **Code Landmarks**
- `Line 72`: Implements a search function that filters children by multiple criteria and joins with donor information
- `Line 302`: Creates a new child record with proper initialization of partner relationships and types
- `Line 327`: Manages recurring gift batches specifically for sponsorship transactions
- `Line 409`: Loads child details with related sponsorship information and donor contact details
- `Line 675`: Validates incoming donations against sponsorship records to ensure consistency

[Generated by the Sage AI expert workbench: 2025-03-30 02:22:57  https://sage-tech.ai/workbench]: #